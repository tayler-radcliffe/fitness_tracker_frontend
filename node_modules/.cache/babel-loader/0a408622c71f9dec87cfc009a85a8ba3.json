{"ast":null,"code":"import _slicedToArray from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useState}from'react';import{fetchActivities,getCurrentToken}from'../api';import Activity from'./Activity';import Button from'@material-ui/core/Button';import AddActivityForm from'./AddActivityForm';import{makeStyles}from'@material-ui/core/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var createActivity=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var activityName,activityDescription;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:activityName=_ref.activityName,activityDescription=_ref.activityDescription;_context.next=3;return fetch('https://fitnesstrac-kr.herokuapp.com/api/activities',{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(getCurrentToken())},body:JSON.stringify({name:activityName,description:activityDescription})}).then(function(response){return response.json();}).then(function(result){console.log(result);if(result.error){alert(result.error);}else{alert('Your activity has been created');}}).catch(console.error);case 3:case\"end\":return _context.stop();}}},_callee);}));return function createActivity(_x){return _ref2.apply(this,arguments);};}();var Activities=function Activities(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),activities=_useState2[0],setActivities=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),creator=_useState4[0],setCreator=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setIsOpen=_useState6[1];useEffect(function(){Promise.all([fetchActivities()]).then(function(_ref3){var _ref4=_slicedToArray(_ref3,1),data=_ref4[0];setActivities(data);});},[]);var showForm=function showForm(){if(open===false){setIsOpen(true);}else{setIsOpen(false);}};var useStyles=makeStyles(function(theme){return{container:{display:'flex',flexWrap:'wrap',position:'relative',margin:'10px'},formControl:{margin:theme.spacing(2),minWidth:120},textFields:{width:'350px',margin:theme.spacing(2)}};});var classes=useStyles();if(getCurrentToken()){return/*#__PURE__*/_jsxs(\"div\",{className:\"activities\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Activities\"}),/*#__PURE__*/_jsx(Button,{className:classes.container,onClick:showForm,color:\"secondary\",variant:\"contained\",children:\"Create A New Activity\"}),/*#__PURE__*/_jsx(AddActivityForm,{setIsOpen:setIsOpen,open:open,setActivities:setActivities}),activities?activities.map(function(activity,index){return/*#__PURE__*/_jsx(Activity,{creator:creator,setCreator:setCreator,activity:activity},index);}):null]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"activities\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Activities\"}),activities?activities.map(function(activity,index){return/*#__PURE__*/_jsx(Activity,{creator:creator,setCreator:setCreator,activity:activity},index);}):null]});}};export default Activities;","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/components/Activities.js"],"names":["React","useEffect","useState","fetchActivities","getCurrentToken","Activity","Button","AddActivityForm","makeStyles","createActivity","activityName","activityDescription","fetch","method","headers","body","JSON","stringify","name","description","then","response","json","result","console","log","error","alert","catch","Activities","activities","setActivities","creator","setCreator","open","setIsOpen","Promise","all","data","showForm","useStyles","theme","container","display","flexWrap","position","margin","formControl","spacing","minWidth","textFields","width","classes","map","activity","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { fetchActivities, getCurrentToken } from '../api';\nimport Activity from './Activity';\nimport Button from '@material-ui/core/Button';\nimport AddActivityForm from './AddActivityForm';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nexport const createActivity = async ({activityName, activityDescription}) => {\n    await fetch('https://fitnesstrac-kr.herokuapp.com/api/activities', {\n        method: \"POST\",\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${getCurrentToken()}`\n          },\n        body: JSON.stringify({\n            name: activityName,\n            description: activityDescription\n      })\n    }).then(response => response.json())\n    .then(result => {\n        console.log(result);\n        if(result.error) {\n          alert(result.error)\n        } else {\n          alert('Your activity has been created')\n        }\n    })\n    .catch(console.error);\n}\n\n\nconst Activities = () => {\n\n    const [activities, setActivities] = useState([]);\n    const [creator, setCreator] = useState('');\n    const [open, setIsOpen] = useState(false);\n\n    useEffect(() => {\n      Promise.all([fetchActivities()]).then(([data]) => {\n        setActivities(data);\n      });\n    }, [])\n\n    const showForm = () => {\n      if (open === false){\n           setIsOpen(true)}\n      else {\n          setIsOpen(false)\n      }\n  }\n\n  const useStyles = makeStyles((theme) => ({\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      position: 'relative',\n      margin: '10px',\n    },\n    formControl: {\n      margin: theme.spacing(2),\n      minWidth: 120,\n    },\n    textFields: {\n        width: '350px',\n        margin: theme.spacing(2)\n      },\n  }));\n\n  const classes = useStyles();\n\n  if(getCurrentToken()) {\n    return (\n      <div className='activities'>\n         <h1>Activities</h1>\n          <Button className={classes.container}\n            onClick={showForm}\n            color='secondary'\n            variant='contained'>Create A New Activity</Button>\n          <AddActivityForm setIsOpen={setIsOpen} open={open} setActivities={setActivities}/>\n            {activities ? activities.map((activity, index) => <Activity creator={creator} setCreator={setCreator} key={index} activity={activity} /> ) : null }\n         </div>\n    )} else {\n        return (\n            <div className='activities'>\n            <h1>Activities</h1>\n            {activities ? activities.map((activity, index) => <Activity creator={creator} setCreator={setCreator} key={index} activity={activity} /> ) : null }\n         </div>\n\n        )\n    }\n}\n\n\nexport default Activities;"]},"metadata":{},"sourceType":"module"}