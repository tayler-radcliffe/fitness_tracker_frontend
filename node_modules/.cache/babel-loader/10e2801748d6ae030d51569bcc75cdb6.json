{"ast":null,"code":"import _defineProperty from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import MyActivity from'./MyActivity';import{fetchUserRoutines,getCurrentToken}from'../api';import AddAnActivityForm from'./AddAnActivityForm';import UpdateRoutineForm from'./UpdateRoutineForm';import Button from'@material-ui/core/Button';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MyRoutine(_ref){var _jsx2,_jsx3;var currentUser=_ref.currentUser,routine=_ref.routine,setMyRoutines=_ref.setMyRoutines;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setIsOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),routineOpen=_useState4[0],setIsRoutineOpen=_useState4[1];var showForm=function showForm(){if(open===false){setIsOpen(true);}else{setIsOpen(false);}};var showRoutine=function showRoutine(){if(routineOpen===false){setIsRoutineOpen(true);}else{setIsRoutineOpen(false);}};var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"https://fitnesstrac-kr.herokuapp.com/api/routines/\".concat(routine.id),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(getCurrentToken())}}).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){var newRoutines;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(result);alert('Your routine has been deleted.');_context.next=4;return fetchUserRoutines(currentUser);case 4:newRoutines=_context.sent;setMyRoutines(newRoutines);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}()).catch(console.error);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{class:\"routine-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"routine-title\",children:routine.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"routine-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Goal: \"}),routine.goal]}),/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Creator: \"}),\" \",routine.creatorName]}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Activities include:\"})}),/*#__PURE__*/_jsx(\"h4\",{children:routine.activities.map(function(activity,index){return/*#__PURE__*/_jsx(MyActivity,{currentUser:currentUser,setMyRoutines:setMyRoutines,routine:routine,activity:activity},index);})}),/*#__PURE__*/_jsx(Button,{className:\"button\",color:\"secondary\",onClick:showForm,variant:\"contained\",children:open?'Hide':'Add an Activity'}),/*#__PURE__*/_jsx(AddAnActivityForm,{currentUser:currentUser,setMyRoutines:setMyRoutines,routine:routine,setIsOpen:setIsOpen,open:open}),/*#__PURE__*/_jsx(Button,{className:\"button\",color:\"secondary\",variant:\"contained\",onClick:showRoutine,children:routineOpen?'Hide':'Update Routine'}),/*#__PURE__*/_jsx(UpdateRoutineForm,(_jsx2={currentUser:currentUser,setMyRoutines:setMyRoutines,setIsRoutineOpen:setIsRoutineOpen},_defineProperty(_jsx2,\"setMyRoutines\",setMyRoutines),_defineProperty(_jsx2,\"routineOpen\",routineOpen),_defineProperty(_jsx2,\"routine\",routine),_jsx2)),/*#__PURE__*/_jsx(Button,(_jsx3={className:\"button\",color:\"secondary\",onClick:showForm,variant:\"contained\"},_defineProperty(_jsx3,\"onClick\",handleDelete),_defineProperty(_jsx3,\"children\",\"Delete Entire Routine\"),_jsx3)),/*#__PURE__*/_jsxs(\"h4\",{children:[\"This routine is \",routine.isPublic?'public.':'private.']})]})]});}export default MyRoutine;","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/components/MyRoutine.js"],"names":["React","useState","MyActivity","fetchUserRoutines","getCurrentToken","AddAnActivityForm","UpdateRoutineForm","Button","MyRoutine","currentUser","routine","setMyRoutines","open","setIsOpen","routineOpen","setIsRoutineOpen","showForm","showRoutine","handleDelete","fetch","id","method","headers","then","response","json","result","console","log","alert","newRoutines","catch","error","name","goal","creatorName","activities","map","activity","index","isPublic"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport MyActivity from './MyActivity';\nimport { fetchUserRoutines, getCurrentToken } from '../api';\nimport AddAnActivityForm from './AddAnActivityForm';\nimport UpdateRoutineForm from './UpdateRoutineForm';\nimport Button from '@material-ui/core/Button';\nimport './style.css';\n\n\nfunction MyRoutine({ currentUser, routine, setMyRoutines }) {\n\n    const [open, setIsOpen] = useState(false);\n    const [routineOpen, setIsRoutineOpen] = useState(false);\n\n    const showForm = () => {\n        if (open === false) {\n            setIsOpen(true)\n        }\n        else {\n            setIsOpen(false)\n        }\n    }\n\n    const showRoutine = () => {\n        if (routineOpen === false) {\n            setIsRoutineOpen(true);\n        }\n        else {\n            setIsRoutineOpen(false)\n        }\n    }\n\n\n    const handleDelete = async () => {\n        fetch(`https://fitnesstrac-kr.herokuapp.com/api/routines/${routine.id}`, {\n            method: \"DELETE\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${getCurrentToken()}`\n            }\n        }).then(response => response.json())\n            .then(async(result) => {\n                console.log(result);\n                alert('Your routine has been deleted.')\n                const newRoutines = await fetchUserRoutines(currentUser);\n                setMyRoutines(newRoutines);\n            })\n            .catch(console.error);\n    }\n\n\n    return (\n        <div class=\"routine-card\">\n            <h2 className=\"routine-title\">{routine.name}</h2>\n            <div className=\"routine-content\">\n                <h3><strong>Goal: </strong>{routine.goal}</h3>\n                <h3><strong>Creator: </strong> {routine.creatorName}</h3>\n                <h3><strong>Activities include:</strong></h3>\n                <h4>{routine.activities.map((activity, index) =>\n                <MyActivity\n                    currentUser={currentUser}\n                    setMyRoutines={setMyRoutines}\n                    routine={routine}\n                    key={index}\n                    activity={activity} />)}</h4>\n                <Button\n                    className='button'\n                    color='secondary'\n                    onClick={showForm}\n                    variant=\"contained\">\n                    {open ? 'Hide' : 'Add an Activity'}</Button>\n                <AddAnActivityForm\n                    currentUser={currentUser}\n                    setMyRoutines={setMyRoutines}\n                    routine={routine}\n                    setIsOpen={setIsOpen}\n                    open={open} />\n                <Button\n                    className='button'\n                    color='secondary'\n                    variant=\"contained\"\n                    onClick={showRoutine}>\n                    {routineOpen ? 'Hide' : 'Update Routine'}\n                </Button>\n                <UpdateRoutineForm\n                    currentUser={currentUser}\n                    setMyRoutines={setMyRoutines}\n                    setIsRoutineOpen={setIsRoutineOpen}\n                    setMyRoutines={setMyRoutines}\n                    routineOpen={routineOpen}\n                    routine={routine} />\n                <Button\n                    className='button'\n                    color='secondary'\n                    onClick={showForm}\n                    variant=\"contained\"\n                    onClick={handleDelete}>Delete Entire Routine</Button>\n                <h4>This routine is {routine.isPublic ? 'public.' : 'private.'}</h4>\n            </div>\n        </div>\n    )\n}\n\nexport default MyRoutine;\n"]},"metadata":{},"sourceType":"module"}