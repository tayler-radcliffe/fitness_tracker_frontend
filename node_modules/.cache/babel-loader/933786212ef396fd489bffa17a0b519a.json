{"ast":null,"code":"import _regeneratorRuntime from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect,Link}from'react-router-dom';import{fetchUserRoutines,getCurrentToken,storeLoginToken}from'../api';import'../components/register.css';import FormControl from'@material-ui/core/FormControl';import{makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import OutlinedInput from'@material-ui/core/OutlinedInput';import TextField from'@material-ui/core/TextField';import{useHistory}from\"react-router-dom\";import{CropLandscapeOutlined}from'@material-ui/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(_ref){var currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser,username=_ref.username,password=_ref.password,confirmedPassword=_ref.confirmedPassword,setUsername=_ref.setUsername,setPassword=_ref.setPassword,setConfirmedPassword=_ref.setConfirmedPassword,setMyRoutines=_ref.setMyRoutines;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,password){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(password!==confirmedPassword)){_context.next=4;break;}alert('Passwords must match');_context.next=6;break;case 4:_context.next=6;return fetch('https://fitnesstrac-kr.herokuapp.com/api/users/register',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(response){return response.json();}).then(function(result){console.log(result);if(result.error){alert(result.message);setUsername('');setPassword('');setConfirmedPassword('');}else{console.log('This is your login token',result.token);setToken(result.token);storeLoginToken(result.token);setUsername('');setPassword('');setConfirmedPassword('');}}).catch(console.error);case 6:case\"end\":return _context.stop();}}},_callee);}));return function registerUser(_x,_x2){return _ref2.apply(this,arguments);};}();var handleClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var newRoutines;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();registerUser(username,password);setCurrentUser(username);_context2.next=5;return fetchUserRoutines(currentUser);case 5:newRoutines=_context2.sent;setMyRoutines(newRoutines);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleClick(_x3){return _ref3.apply(this,arguments);};}();var useStyles=makeStyles(function(theme){return{container:{display:'flex',flexWrap:'wrap'},formControl:{margin:theme.spacing(2),minWidth:120},textFields:{width:'250px',margin:theme.spacing(2),marginTop:'5px'}};});var classes=useStyles();if(token){return/*#__PURE__*/_jsx(Redirect,{to:\"/myroutines\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"register-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleClick,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create an Account\"}),/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",className:classes.formControl,children:[/*#__PURE__*/_jsx(TextField,{className:classes.textFields,type:\"text\",value:username,variant:\"outlined\",InputLabelProps:{shrink:true},label:\"Username\",min:\"8\",max:\"20\",required:true,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{className:classes.textFields,type:\"password\",value:password,variant:\"outlined\",InputLabelProps:{shrink:true},label:\"Password\",minLength:\"7\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{className:classes.textFields,type:\"password\",value:confirmedPassword,variant:\"outlined\",InputLabelProps:{shrink:true},label:\"Confirm Password\",minLength:\"7\",required:true,onChange:function onChange(e){return setConfirmedPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:\"register-button\",children:/*#__PURE__*/_jsx(Button,{size:\"large\",type:\"submit\",color:\"primary\",variant:\"contained\",children:\"Register\"})}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"register-link\",children:\"Already have an account? Sign in\"})]})]})});};export default Register;","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/components/Register.js"],"names":["React","useState","Redirect","Link","fetchUserRoutines","getCurrentToken","storeLoginToken","FormControl","makeStyles","Button","OutlinedInput","TextField","useHistory","CropLandscapeOutlined","Register","currentUser","setCurrentUser","username","password","confirmedPassword","setUsername","setPassword","setConfirmedPassword","setMyRoutines","token","setToken","registerUser","alert","fetch","method","headers","body","JSON","stringify","then","response","json","result","console","log","error","message","catch","handleClick","event","preventDefault","newRoutines","useStyles","theme","container","display","flexWrap","formControl","margin","spacing","minWidth","textFields","width","marginTop","classes","shrink","e","target","value"],"mappings":"sVAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,CAAmBC,IAAnB,KAA+B,kBAA/B,CACA,OAASC,iBAAT,CAA4BC,eAA5B,CAA6CC,eAA7C,KAAoE,QAApE,CACA,MAAO,4BAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,qBAAT,KAAsC,oBAAtC,C,wFAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAA2I,IAAxIC,CAAAA,WAAwI,MAAxIA,WAAwI,CAA3HC,cAA2H,MAA3HA,cAA2H,CAA3GC,QAA2G,MAA3GA,QAA2G,CAAjGC,QAAiG,MAAjGA,QAAiG,CAAvFC,iBAAuF,MAAvFA,iBAAuF,CAApEC,WAAoE,MAApEA,WAAoE,CAAvDC,WAAuD,MAAvDA,WAAuD,CAA1CC,oBAA0C,MAA1CA,oBAA0C,CAApBC,aAAoB,MAApBA,aAAoB,eAEhItB,QAAQ,CAAC,EAAD,CAFwH,wCAEnJuB,KAFmJ,eAE5IC,QAF4I,eAI1J,GAAMC,CAAAA,YAAY,2FAAG,iBAAOT,QAAP,CAAiBC,QAAjB,uHACfA,QAAQ,GAAKC,iBADE,0BAEjBQ,KAAK,CAAC,sBAAD,CAAL,CAFiB,mDAIXC,CAAAA,KAAK,CAAC,yDAAD,CAA4D,CACrEC,MAAM,CAAE,MAD6D,CAErEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF4D,CAKrEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBhB,QAAQ,CAARA,QADmB,CAEnBC,QAAQ,CAARA,QAFmB,CAAf,CAL+D,CAA5D,CAAL,CASHgB,IATG,CASE,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EATV,EAUHF,IAVG,CAUE,SAAAG,MAAM,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACA,GAAIA,MAAM,CAACG,KAAX,CAAkB,CAChBb,KAAK,CAACU,MAAM,CAACI,OAAR,CAAL,CACArB,WAAW,CAAC,EAAD,CAAX,CACAC,WAAW,CAAC,EAAD,CAAX,CACAC,oBAAoB,CAAC,EAAD,CAApB,CACD,CALD,IAKO,CACLgB,OAAO,CAACC,GAAR,CAAY,0BAAZ,CAAwCF,MAAM,CAACb,KAA/C,EACAC,QAAQ,CAACY,MAAM,CAACb,KAAR,CAAR,CACAlB,eAAe,CAAC+B,MAAM,CAACb,KAAR,CAAf,CACAJ,WAAW,CAAC,EAAD,CAAX,CACAC,WAAW,CAAC,EAAD,CAAX,CACAC,oBAAoB,CAAC,EAAD,CAApB,CACD,CACF,CAzBG,EA0BHoB,KA1BG,CA0BGJ,OAAO,CAACE,KA1BX,CAJW,uDAAH,kBAAZd,CAAAA,YAAY,iDAAlB,CAmCA,GAAMiB,CAAAA,WAAW,2FAAG,kBAAOC,KAAP,sIAClBA,KAAK,CAACC,cAAN,GACAnB,YAAY,CAACT,QAAD,CAAWC,QAAX,CAAZ,CACAF,cAAc,CAACC,QAAD,CAAd,CAHkB,uBAIQb,CAAAA,iBAAiB,CAACW,WAAD,CAJzB,QAIZ+B,WAJY,gBAKlBvB,aAAa,CAACuB,WAAD,CAAb,CALkB,wDAAH,kBAAXH,CAAAA,WAAW,8CAAjB,CASA,GAAMI,CAAAA,SAAS,CAAGvC,UAAU,CAAC,SAACwC,KAAD,QAAY,CACvCC,SAAS,CAAE,CACTC,OAAO,CAAE,MADA,CAETC,QAAQ,CAAE,MAFD,CAD4B,CAKvCC,WAAW,CAAE,CACXC,MAAM,CAAEL,KAAK,CAACM,OAAN,CAAc,CAAd,CADG,CAEXC,QAAQ,CAAE,GAFC,CAL0B,CASvCC,UAAU,CAAE,CACVC,KAAK,CAAE,OADG,CAEVJ,MAAM,CAAEL,KAAK,CAACM,OAAN,CAAc,CAAd,CAFE,CAGVI,SAAS,CAAE,KAHD,CAT2B,CAAZ,EAAD,CAA5B,CAgBA,GAAMC,CAAAA,OAAO,CAAGZ,SAAS,EAAzB,CAEA,GAAIvB,KAAJ,CAAW,CACT,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,aAAb,EAAP,CACD,CAED,mBACE,YAAK,SAAS,CAAC,oBAAf,uBACE,cAAM,SAAS,CAAC,eAAhB,CAAgC,QAAQ,CAAEmB,WAA1C,wBACE,yCADF,cAEE,MAAC,WAAD,EAAa,OAAO,CAAC,UAArB,CAAgC,SAAS,CAAEgB,OAAO,CAACP,WAAnD,wBAEE,KAAC,SAAD,EAAW,SAAS,CAAEO,OAAO,CAACH,UAA9B,CACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEvC,QAFT,CAGE,OAAO,CAAC,UAHV,CAIE,eAAe,CAAE,CACf2C,MAAM,CAAE,IADO,CAJnB,CAOE,KAAK,CAAC,UAPR,CAQE,GAAG,CAAC,GARN,CAQU,GAAG,CAAC,IARd,CAQmB,QAAQ,KAR3B,CASE,QAAQ,CAAE,kBAACC,CAAD,QAAOzC,CAAAA,WAAW,CAACyC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EATZ,EAFF,cAcE,KAAC,SAAD,EAAW,SAAS,CAAEJ,OAAO,CAACH,UAA9B,CACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAEtC,QAFT,CAGE,OAAO,CAAC,UAHV,CAIE,eAAe,CAAE,CACf0C,MAAM,CAAE,IADO,CAJnB,CAOE,KAAK,CAAC,UAPR,CAQE,SAAS,CAAC,GARZ,CASE,QAAQ,KATV,CAUE,QAAQ,CAAE,kBAACC,CAAD,QAAOxC,CAAAA,WAAW,CAACwC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAVZ,EAdF,cA2BE,KAAC,SAAD,EAAW,SAAS,CAAEJ,OAAO,CAACH,UAA9B,CACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAErC,iBAFT,CAGE,OAAO,CAAC,UAHV,CAIE,eAAe,CAAE,CACfyC,MAAM,CAAE,IADO,CAJnB,CAOE,KAAK,CAAC,kBAPR,CAQE,SAAS,CAAC,GARZ,CASE,QAAQ,KATV,CAUE,QAAQ,CAAE,kBAACC,CAAD,QAAOvC,CAAAA,oBAAoB,CAACuC,CAAC,CAACC,MAAF,CAASC,KAAV,CAA3B,EAVZ,EA3BF,cAuCE,YAAK,SAAS,CAAC,iBAAf,uBACE,KAAC,MAAD,EACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,QAFP,CAGE,KAAK,CAAC,SAHR,CAIE,OAAO,CAAC,WAJV,sBADF,EAvCF,cAiDE,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,CAAkB,SAAS,CAAC,eAA5B,8CAjDF,GAFF,GADF,EADF,CA4DD,CAlID,CAqIA,cAAejD,CAAAA,QAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport { fetchUserRoutines, getCurrentToken, storeLoginToken } from '../api';\nimport '../components/register.css';\nimport FormControl from '@material-ui/core/FormControl';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport TextField from '@material-ui/core/TextField';\nimport { useHistory } from \"react-router-dom\";\nimport { CropLandscapeOutlined } from '@material-ui/icons';\n\n\n\nconst Register = ({ currentUser, setCurrentUser, username, password, confirmedPassword, setUsername, setPassword, setConfirmedPassword, setMyRoutines }) => {\n\n  const [token, setToken] = useState('');\n\n  const registerUser = async (username, password) => {\n    if (password !== confirmedPassword) {\n      alert('Passwords must match')\n    } else {\n      await fetch('https://fitnesstrac-kr.herokuapp.com/api/users/register', {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      }).then(response => response.json())\n        .then(result => {\n          console.log(result);\n          if (result.error) {\n            alert(result.message);\n            setUsername('');\n            setPassword('');\n            setConfirmedPassword('');\n          } else {\n            console.log('This is your login token', result.token)\n            setToken(result.token);\n            storeLoginToken(result.token);\n            setUsername('');\n            setPassword('');\n            setConfirmedPassword('');\n          }\n        })\n        .catch(console.error);\n    }\n  };\n\n\n  const handleClick = async (event) => {\n    event.preventDefault();\n    registerUser(username, password);\n    setCurrentUser(username);\n    const newRoutines = await fetchUserRoutines(currentUser);\n    setMyRoutines(newRoutines);\n  };\n\n\n  const useStyles = makeStyles((theme) => ({\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n    formControl: {\n      margin: theme.spacing(2),\n      minWidth: 120\n    },\n    textFields: {\n      width: '250px',\n      margin: theme.spacing(2),\n      marginTop: '5px'\n    },\n  }));\n\n  const classes = useStyles();\n\n  if (token) {\n    return <Redirect to='/myroutines' />\n  }\n\n  return (\n    <div className=\"register-container\">\n      <form className=\"register-form\" onSubmit={handleClick}>\n        <h2>Create an Account</h2>\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n\n          <TextField className={classes.textFields}\n            type='text'\n            value={username}\n            variant=\"outlined\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            label='Username'\n            min='8' max='20' required\n            onChange={(e) => setUsername(e.target.value)}\n          />\n\n          <TextField className={classes.textFields}\n            type='password'\n            value={password}\n            variant=\"outlined\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            label='Password'\n            minLength=\"7\"\n            required\n            onChange={(e) => setPassword(e.target.value)}\n          />\n\n          <TextField className={classes.textFields}\n            type='password'\n            value={confirmedPassword}\n            variant=\"outlined\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            label='Confirm Password'\n            minLength=\"7\"\n            required\n            onChange={(e) => setConfirmedPassword(e.target.value)}\n          />\n          <div className=\"register-button\">\n            <Button\n              size='large'\n              type='submit'\n              color='primary'\n              variant=\"contained\"\n            >Register</Button>\n\n          </div>\n\n          <Link to=\"/login\" className=\"register-link\">\n            Already have an account? Sign in\n                </Link>\n        </FormControl>\n      </form>\n    </div>\n  )\n}\n\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}