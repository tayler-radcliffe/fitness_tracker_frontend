{"ast":null,"code":"import _defineProperty from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Activity from'./Activity';import{getCurrentToken}from'../api';import AddAnActivityForm from'./AddAnActivityForm';import UpdateRoutineForm from'./UpdateRoutineForm';import Button from'@material-ui/core/Button';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Routine(_ref){var routine=_ref.routine;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),open=_useState4[0],setIsOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),routineOpen=_useState6[0],setIsRoutineOpen=_useState6[1];var showForm=function showForm(){if(open===false){setIsOpen(true);}else{setIsOpen(false);}};var showRoutine=function showRoutine(){if(routineOpen===false){setIsRoutineOpen(true);}else{setIsRoutineOpen(false);}};fetch('http://fitnesstrac-kr.herokuapp.com/api/users/me',{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(getCurrentToken())}}).then(function(response){return response.json();}).then(function(result){setCurrentUser(result.username);}).catch(console.error);var handleDelete=function handleDelete(){fetch(\"http://fitnesstrac-kr.herokuapp.com/api/routines/\".concat(routine.id),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(getCurrentToken())}}).then(function(response){return response.json();}).then(function(result){console.log(result);}).catch(console.error);};if(routine.isPublic===true&&currentUser===routine.creatorName){var _jsx2;return/*#__PURE__*/_jsxs(\"div\",{class:\"routine-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"routine-title\",children:routine.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"routine-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Goal: \"}),routine.goal]}),/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Creator: \"}),\" \",routine.creatorName]}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Activities include:\"})}),/*#__PURE__*/_jsx(\"h4\",{children:routine.activities.map(function(activity,index){return/*#__PURE__*/_jsx(Activity,{routine:routine,activity:activity},index);})}),/*#__PURE__*/_jsx(Button,{className:\"button\",color:\"secondary\",onClick:showForm,variant:\"contained\",children:open?'Hide':'Add an Activity'}),/*#__PURE__*/_jsx(AddAnActivityForm,{routine:routine,open:open}),/*#__PURE__*/_jsx(Button,{className:\"button\",color:\"secondary\",variant:\"contained\",onClick:showRoutine,children:routineOpen?'Hide':'Update Routine'}),/*#__PURE__*/_jsx(UpdateRoutineForm,{routineOpen:routineOpen,routine:routine}),/*#__PURE__*/_jsx(Button,(_jsx2={className:\"button\",color:\"secondary\",onClick:showForm,variant:\"contained\"},_defineProperty(_jsx2,\"onClick\",handleDelete),_defineProperty(_jsx2,\"children\",\"Delete Entire Routine\"),_jsx2)),/*#__PURE__*/_jsxs(\"h4\",{children:[\"This routine is \",routine.isPublic?'public.':'private.']})]})]});}else return/*#__PURE__*/_jsxs(\"div\",{class:\"routine-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"routine-title\",children:routine.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"routine-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Goal: \"}),routine.goal]}),/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Creator: \"}),\" \",routine.creatorName]}),/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Activities include:\"})}),/*#__PURE__*/_jsx(\"h4\",{children:routine.activities.map(function(activity,index){return/*#__PURE__*/_jsx(Activity,{routine:routine,activity:activity},index);})})]})]});}export default Routine;","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/components/Routine.js"],"names":["React","useEffect","useState","Activity","getCurrentToken","AddAnActivityForm","UpdateRoutineForm","Button","Routine","routine","currentUser","setCurrentUser","open","setIsOpen","routineOpen","setIsRoutineOpen","showForm","showRoutine","fetch","headers","then","response","json","result","username","catch","console","error","handleDelete","id","method","log","isPublic","creatorName","name","goal","activities","map","activity","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Activity from './Activity';\nimport { getCurrentToken } from '../api';\nimport AddAnActivityForm from './AddAnActivityForm';\nimport UpdateRoutineForm from './UpdateRoutineForm';\nimport Button from '@material-ui/core/Button';\nimport './style.css'\n\n\nfunction Routine ({routine}) {\n\n    const [currentUser, setCurrentUser] = useState('');\n    const [open, setIsOpen] = useState(false);\n    const [routineOpen, setIsRoutineOpen] = useState(false);\n\n    const showForm = () => {\n        if (open === false){\n             setIsOpen(true);}\n        else {\n            setIsOpen(false)\n        }\n    }\n\n    const showRoutine = () => {\n        if (routineOpen === false){\n             setIsRoutineOpen(true);}\n        else {\n            setIsRoutineOpen(false)\n        }\n    }\n\n    fetch('http://fitnesstrac-kr.herokuapp.com/api/users/me', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${getCurrentToken()}`\n        },\n      }).then(response => response.json())\n        .then(result => {\n          setCurrentUser(result.username);\n        })\n        .catch(console.error);\n\n\n\n    const handleDelete = () => {\n        fetch(`http://fitnesstrac-kr.herokuapp.com/api/routines/${routine.id}`, {\n            method: \"DELETE\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${getCurrentToken()}`\n            }\n        }).then(response => response.json())\n        .then(result => {\n            console.log(result);\n        })\n        .catch(console.error);\n    }\n    \n\n\nif(routine.isPublic === true && currentUser === routine.creatorName) {\n    return (\n        <div class=\"routine-card\">\n            <h2 className=\"routine-title\">{routine.name}</h2>\n        <div className=\"routine-content\">\n            <h3><strong>Goal: </strong>{routine.goal}</h3>\n            <h3><strong>Creator: </strong> {routine.creatorName}</h3>\n            <h3><strong>Activities include:</strong></h3> \n            <h4>{routine.activities.map((activity, index) => <Activity routine={routine} key={index} activity={activity}/>)}</h4>\n            <Button \n                className='button'\n                color='secondary'\n                onClick={showForm}\n                variant=\"contained\">\n                    {open ? 'Hide' : 'Add an Activity'}</Button>\n                <AddAnActivityForm routine={routine} open={open}/>\n            <Button \n                className='button'\n                color='secondary'\n                variant=\"contained\" \n                onClick={showRoutine}>\n                    {routineOpen ? 'Hide' : 'Update Routine'}\n                </Button>\n                <UpdateRoutineForm routineOpen={routineOpen} routine={routine}/>\n            <Button \n                className='button'\n                color='secondary'\n                onClick={showForm}\n                variant=\"contained\" \n                onClick={handleDelete}>Delete Entire Routine</Button>\n            <h4>This routine is {routine.isPublic ? 'public.' : 'private.'}</h4>\n        </div>\n    </div>\n        )\n    } else return (\n    <div class=\"routine-card\">\n        <h2 className=\"routine-title\">{routine.name}</h2>\n        <div className=\"routine-content\">\n        <h3><strong>Goal: </strong>{routine.goal}</h3>\n        <h3><strong>Creator: </strong> {routine.creatorName}</h3>\n        <h3><strong>Activities include:</strong></h3> \n        <h4>{routine.activities.map((activity, index) => <Activity routine={routine} key={index} activity={activity}/>)}</h4>\n        </div>\n    </div>\n    )\n}\n\nexport default Routine;"]},"metadata":{},"sourceType":"module"}