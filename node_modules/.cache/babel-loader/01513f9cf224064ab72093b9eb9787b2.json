{"ast":null,"code":"import _defineProperty from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{fetchUsername,fetchUserRoutines,getCurrentToken}from'../api';import ActivityForm from'./ActivityForm';import Button from'@material-ui/core/Button';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function MyActivity(props){var activity=props.activity,currentUser=props.currentUser,setMyRoutines=props.setMyRoutines;var activityId=activity.routineActivityId;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setIsOpen=_useState2[1];var openForm=function openForm(){if(open===false){setIsOpen(true);}else{setIsOpen(false);}};var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetch(\"https://fitnesstrac-kr.herokuapp.com/api/routine_activities/\".concat(activityId),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(getCurrentToken())}}).then(function(response){return response.json();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(result){var newRoutines;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(result);alert('Your activity has been deleted.');_context.next=4;return fetchUserRoutines(currentUser);case 4:newRoutines=_context.sent;setMyRoutines(newRoutines);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(console.error);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(){return _ref.apply(this,arguments);};}();if(getCurrentToken()){var _jsx2,_jsx3;return/*#__PURE__*/_jsxs(\"div\",{class:\"activity-card\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Name: \",activity.name]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Description: \",activity.description]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Duration: \",activity.duration]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Count: \",activity.count]}),/*#__PURE__*/_jsx(Button,(_jsx2={className:\"routine-button\",onClick:openForm},_defineProperty(_jsx2,\"className\",\"editbutton\"),_defineProperty(_jsx2,\"color\",\"secondary\"),_defineProperty(_jsx2,\"variant\",\"contained\"),_defineProperty(_jsx2,\"children\",open?'Hide':'Update Activity'),_jsx2)),/*#__PURE__*/_jsx(ActivityForm,{id:\"activityform\",currentUser:currentUser,setMyRoutines:setMyRoutines,activity:activity,setIsOpen:setIsOpen,open:open}),/*#__PURE__*/_jsx(Button,(_jsx3={className:\"routine-button\",onClick:handleDelete},_defineProperty(_jsx3,\"className\",\"editbutton\"),_defineProperty(_jsx3,\"color\",\"secondary\"),_defineProperty(_jsx3,\"variant\",\"contained\"),_defineProperty(_jsx3,\"children\",\"Delete Activity\"),_jsx3))]});}}","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/components/MyActivity.js"],"names":["React","useState","useEffect","fetchUsername","fetchUserRoutines","getCurrentToken","ActivityForm","Button","MyActivity","props","activity","currentUser","setMyRoutines","activityId","routineActivityId","open","setIsOpen","openForm","handleDelete","fetch","method","headers","then","response","json","result","console","log","alert","newRoutines","catch","error","name","description","duration","count"],"mappings":"2cAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,aAAT,CAAwBC,iBAAxB,CAA2CC,eAA3C,KAAkE,QAAlE,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,C,wFAEA,cAAe,SAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,IAElCC,CAAAA,QAFkC,CAKlCD,KALkC,CAElCC,QAFkC,CAGlCC,WAHkC,CAKlCF,KALkC,CAGlCE,WAHkC,CAIlCC,aAJkC,CAKlCH,KALkC,CAIlCG,aAJkC,CAOtC,GAAMC,CAAAA,UAAU,CAAGH,QAAQ,CAACI,iBAA5B,CAPsC,cASZb,QAAQ,CAAC,KAAD,CATI,wCAS/Bc,IAT+B,eASzBC,SATyB,eAWtC,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,GAAIF,IAAI,GAAK,KAAb,CAAoB,CAChBC,SAAS,CAAC,IAAD,CAAT,CACH,CAFD,IAGK,CACDA,SAAS,CAAC,KAAD,CAAT,CACH,CACJ,CAPD,CASA,GAAME,CAAAA,YAAY,0FAAG,wIACjBC,KAAK,uEAAgEN,UAAhE,EAA8E,CAC/EO,MAAM,CAAE,QADuE,CAE/EC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BhB,eAAe,EAA1C,CAFK,CAFsE,CAA9E,CAAL,CAMGiB,IANH,CAMQ,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EANhB,EAOKF,IAPL,2FAOU,iBAAOG,MAAP,kIACFC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAG,KAAK,CAAC,iCAAD,CAAL,CAFE,sBAGwBxB,CAAAA,iBAAiB,CAACO,WAAD,CAHzC,QAGIkB,WAHJ,eAIFjB,aAAa,CAACiB,WAAD,CAAb,CAJE,sDAPV,iEAaKC,KAbL,CAaWJ,OAAO,CAACK,KAbnB,EADiB,wDAAH,kBAAZb,CAAAA,YAAY,0CAAlB,CAiBA,GAAIb,eAAe,EAAnB,CAAuB,iBACnB,mBACI,aAAK,KAAK,CAAC,eAAX,wBACI,+BAAWK,QAAQ,CAACsB,IAApB,GADJ,cAEI,sCAAkBtB,QAAQ,CAACuB,WAA3B,GAFJ,cAGI,mCAAevB,QAAQ,CAACwB,QAAxB,GAHJ,cAII,gCAAYxB,QAAQ,CAACyB,KAArB,GAJJ,cAKI,KAAC,MAAD,SACI,SAAS,CAAC,gBADd,CAEI,OAAO,CAAElB,QAFb,oCAGc,YAHd,gCAIU,WAJV,kCAKY,WALZ,mCAK0BF,IAAI,CAAG,MAAH,CAAY,iBAL1C,SALJ,cAWI,KAAC,YAAD,EAAc,EAAE,CAAC,cAAjB,CACI,WAAW,CAAEJ,WADjB,CAEI,aAAa,CAAEC,aAFnB,CAGI,QAAQ,CAAEF,QAHd,CAII,SAAS,CAAEM,SAJf,CAKI,IAAI,CAAED,IALV,EAXJ,cAiBI,KAAC,MAAD,SACI,SAAS,CAAC,gBADd,CAEI,OAAO,CAAEG,YAFb,oCAGc,YAHd,gCAIU,WAJV,kCAKY,WALZ,6DAjBJ,GADJ,CA2BH,CACJ","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { fetchUsername, fetchUserRoutines, getCurrentToken } from '../api';\nimport ActivityForm from './ActivityForm';\nimport Button from '@material-ui/core/Button';\n\nexport default function MyActivity(props) {\n    const {\n        activity,\n        currentUser,\n        setMyRoutines\n    } = props;\n\n    const activityId = activity.routineActivityId;\n\n    const [open, setIsOpen] = useState(false);\n\n    const openForm = () => {\n        if (open === false) {\n            setIsOpen(true);\n        }\n        else {\n            setIsOpen(false)\n        }\n    }\n\n    const handleDelete = async () => {\n        fetch(`https://fitnesstrac-kr.herokuapp.com/api/routine_activities/${activityId}`, {\n            method: \"DELETE\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${getCurrentToken()}`\n            }\n        }).then(response => response.json())\n            .then(async (result) => {\n                console.log(result);\n                alert('Your activity has been deleted.')\n                const newRoutines = await fetchUserRoutines(currentUser);\n                setMyRoutines(newRoutines);\n            })\n            .catch(console.error);\n    }\n\n    if (getCurrentToken()) {\n        return (\n            <div class=\"activity-card\">\n                <h4>Name: {activity.name}</h4>\n                <h4>Description: {activity.description}</h4>\n                <h4>Duration: {activity.duration}</h4>\n                <h4>Count: {activity.count}</h4>\n                <Button\n                    className='routine-button'\n                    onClick={openForm}\n                    className='editbutton'\n                    color='secondary'\n                    variant=\"contained\" >{open ? 'Hide' : 'Update Activity'}</Button>\n                <ActivityForm id='activityform'\n                    currentUser={currentUser}\n                    setMyRoutines={setMyRoutines}\n                    activity={activity}\n                    setIsOpen={setIsOpen}\n                    open={open} />\n                <Button\n                    className='routine-button'\n                    onClick={handleDelete}\n                    className='editbutton'\n                    color='secondary'\n                    variant=\"contained\">Delete Activity</Button>\n            </div>\n        )\n\n    }\n}\n"]},"metadata":{},"sourceType":"module"}