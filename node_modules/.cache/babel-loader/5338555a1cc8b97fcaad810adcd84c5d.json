{"ast":null,"code":"import _regeneratorRuntime from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{fetchActivities,fetchUserRoutines,getCurrentToken}from'../api';import Select from'@material-ui/core/Select';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import FormControl from'@material-ui/core/FormControl';import{makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddAnActivityForm=function AddAnActivityForm(_ref){var setIsOpen=_ref.setIsOpen,open=_ref.open,routine=_ref.routine,setMyRoutines=_ref.setMyRoutines,currentUser=_ref.currentUser;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),activities=_useState2[0],setActivities=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),activity=_useState4[0],setActivity=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),duration=_useState6[0],setDuration=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),count=_useState8[0],setCount=_useState8[1];var addActivity=function addActivity(_ref2){var activity=_ref2.activity,count=_ref2.count,duration=_ref2.duration;fetch(\"https://fitnesstrac-kr.herokuapp.com/api/routines/\".concat(routine.id,\"/activities\"),{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(getCurrentToken())},body:JSON.stringify({activityId:activity,count:count,duration:duration})}).then(function(response){return response.json();}).then(function(result){console.log(result);if(result.error){alert('That activity already exists under this routine.');}else{alert('Your activity was added.');}}).catch(console.error);};useEffect(function(){Promise.all([fetchActivities()]).then(function(_ref3){var _ref4=_slicedToArray(_ref3,1),data=_ref4[0];setActivities(data);});},[]);var useStyles=makeStyles(function(theme){return{textFields:{width:'300px',margin:theme.spacing(1)},selector:{width:'300px',margin:theme.spacing(1)}};});var classes=useStyles();if(open===true){return/*#__PURE__*/_jsx(\"form\",{onSubmit:/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newRoutines;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();addActivity({activity:activity,count:count,duration:duration});_context.next=4;return fetchUserRoutines(currentUser);case 4:newRoutines=_context.sent;setMyRoutines(newRoutines);setActivity('');setCount('');setDuration('');setIsOpen(false);case 10:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref5.apply(this,arguments);};}(),children:/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"demo-simple-select-outlined-label\",className:classes.selector,children:\"Activity\"}),/*#__PURE__*/_jsx(Select,{className:classes.selector,id:\"demo-simple-select-outlined\",value:activity,label:\"activity\",size:\"small\",onChange:function onChange(event){setActivity(event.target.value);},children:activities.map(function(activity,idx){return/*#__PURE__*/_jsx(MenuItem,{value:activity.id,children:activity.name},idx);})}),/*#__PURE__*/_jsx(TextField,{className:classes.textFields,label:\"Count\",defaultValue:\"\",variant:\"outlined\",size:\"small\",value:count,onChange:function onChange(e){return setCount(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{className:classes.textFields,label:\"Duration\",defaultValue:\"\",size:\"small\",variant:\"outlined\",value:duration,onChange:function onChange(e){return setDuration(e.target.value);}}),/*#__PURE__*/_jsx(Button,{className:classes.textFields,variant:\"contained\",color:\"primary\",type:\"submit\",onClick:function onClick(){return addActivity;},children:\"Add Activity\"})]})});}else return/*#__PURE__*/_jsx(\"div\",{});};export default AddAnActivityForm;","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/components/AddAnActivityForm.js"],"names":["React","useState","useEffect","fetchActivities","fetchUserRoutines","getCurrentToken","Select","InputLabel","MenuItem","FormControl","makeStyles","Button","TextField","AddAnActivityForm","setIsOpen","open","routine","setMyRoutines","currentUser","activities","setActivities","activity","setActivity","duration","setDuration","count","setCount","addActivity","fetch","id","method","headers","body","JSON","stringify","activityId","then","response","json","result","console","log","error","alert","catch","Promise","all","data","useStyles","theme","textFields","width","margin","spacing","selector","classes","e","preventDefault","newRoutines","event","target","value","map","idx","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { fetchActivities, fetchUserRoutines, getCurrentToken } from '../api';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\n\n\nconst AddAnActivityForm = ({setIsOpen, open, routine, setMyRoutines, currentUser}) => {\n\n    const [activities, setActivities] = useState([]);\n    const [activity, setActivity] = useState('');\n    const [duration, setDuration] = useState('');\n    const [count, setCount] = useState('');\n\n    const addActivity = ({activity, count, duration}) => {\n        fetch(`https://fitnesstrac-kr.herokuapp.com/api/routines/${routine.id}/activities`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${getCurrentToken()}`\n              },\n            body: JSON.stringify({\n                activityId: activity,\n                count: count, \n                duration: duration\n            })\n    }).then(response => response.json())\n      .then(result => {\n        console.log(result);\n        if(result.error) {\n            alert('That activity already exists under this routine.')\n        } else {\n            alert('Your activity was added.')\n        }\n      })\n      .catch(console.error);\n    }\n\n\n    useEffect(() => {\n        Promise.all([fetchActivities()]).then(([data]) => {\n            setActivities(data);\n          });\n    }, [])\n\n    const useStyles = makeStyles((theme) => ({\n        textFields: {\n            width: '300px',\n            margin: theme.spacing(1)\n          },\n         selector: {\n            width: '300px',\n            margin: theme.spacing(1)\n\n          },\n      }));\n\n      const classes = useStyles();\n\n\nif(open === true) {\n        return (\n                <form onSubmit={async (e) => {\n                    e.preventDefault();\n                    addActivity({activity, count, duration});\n                    const newRoutines = await fetchUserRoutines(currentUser);\n                    setMyRoutines(newRoutines);\n                    setActivity('');\n                    setCount('');\n                    setDuration('');\n                    setIsOpen(false);\n                }}>\n                <FormControl variant=\"outlined\" >\n                    <InputLabel id=\"demo-simple-select-outlined-label\"\n                    className={classes.selector}>Activity</InputLabel>\n                    <Select \n                        className={classes.selector}\n                        id=\"demo-simple-select-outlined\"\n                        value={activity} \n                        label=\"activity\"\n                        size='small'\n                        onChange={event => {setActivity(event.target.value)}}>\n                        {activities.map((activity, idx) => { \n                            return <MenuItem key={idx} value={activity.id}>{activity.name}</MenuItem>\n                        })}\n                \n                    </Select>\n                    <TextField\n                        className={classes.textFields}\n                        label=\"Count\"\n                        defaultValue=\"\"\n                        variant=\"outlined\"\n                        size='small'\n                        value={count}\n                        onChange={(e) => setCount(e.target.value)}\n                    />\n                    <TextField\n                        className={classes.textFields}\n                        label=\"Duration\"\n                        defaultValue=\"\"\n                        size='small'\n                        variant=\"outlined\"\n                        value={duration}\n                        onChange={(e) => setDuration(e.target.value)}\n                    />\n             \n                <Button \n                    className={classes.textFields}\n                    variant=\"contained\"\n                    color='primary'\n                    type='submit'\n                    onClick={() => addActivity}>Add Activity</Button> \n                </FormControl>\n            </form>\n        )\n    } else return <div></div>;\n}\n\nexport default AddAnActivityForm;"]},"metadata":{},"sourceType":"module"}