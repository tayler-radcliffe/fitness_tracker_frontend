{"ast":null,"code":"import _regeneratorRuntime from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useEffect,useState}from\"react\";export function storeLoginToken(token){localStorage.setItem('token',token);}export function getCurrentToken(){var token=localStorage.getItem('token');return token;}export function clearCurrentToken(){localStorage.removeItem('token');}export var fetchRoutines=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://fitnesstrac-kr.herokuapp.com/api/routines',{headers:{'Content-Type':'application/json'}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchRoutines(){return _ref.apply(this,arguments);};}();export function fetchUserRoutines(_x){return _fetchUserRoutines.apply(this,arguments);}function _fetchUserRoutines(){_fetchUserRoutines=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(user){var token,response,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:token=localStorage.getItem('token');_context5.next=3;return fetch(\"https://fitnesstrac-kr.herokuapp.com/api/users/\".concat(user,\"/routines\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context5.sent;_context5.next=6;return response.json();case 6:data=_context5.sent;return _context5.abrupt(\"return\",data);case 8:case\"end\":return _context5.stop();}}},_callee5);}));return _fetchUserRoutines.apply(this,arguments);}export var fetchActivities=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('https://fitnesstrac-kr.herokuapp.com/api/activities',{headers:{'Content-Type':'application/json'}});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;return _context2.abrupt(\"return\",data);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchActivities(){return _ref2.apply(this,arguments);};}();export var fetchUsername=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var token,response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:token=localStorage.getItem('token');_context3.next=3;return fetch('https://fitnesstrac-kr.herokuapp.com/api/users/me',{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:data=_context3.sent;console.log(data);return _context3.abrupt(\"return\",data);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchUsername(){return _ref3.apply(this,arguments);};}();export var createRoutine=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref4){var routineName,routineGoal,isPublic,token;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:routineName=_ref4.routineName,routineGoal=_ref4.routineGoal,isPublic=_ref4.isPublic;token=localStorage.getItem('token');_context4.next=4;return fetch('https://fitnesstrac-kr.herokuapp.com/api/routines',{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({name:routineName,goal:routineGoal,isPublic:isPublic})}).then(function(response){return response.json();}).then(function(result){console.log(result);}).catch(console.error);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function createRoutine(_x2){return _ref5.apply(this,arguments);};}();","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/api/index.js"],"names":["useEffect","useState","storeLoginToken","token","localStorage","setItem","getCurrentToken","getItem","clearCurrentToken","removeItem","fetchRoutines","fetch","headers","response","json","data","fetchUserRoutines","user","fetchActivities","fetchUsername","console","log","createRoutine","routineName","routineGoal","isPublic","method","body","JSON","stringify","name","goal","then","result","catch","error"],"mappings":"mOAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CAEA,MAAO,SAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CACnCC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,KAA9B,EACD,CAED,MAAO,SAASG,CAAAA,eAAT,EAA2B,CAChC,GAAMH,CAAAA,KAAK,CAAGC,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAd,CACA,MAAOJ,CAAAA,KAAP,CACD,CAED,MAAO,SAASK,CAAAA,iBAAT,EAA6B,CAClCJ,YAAY,CAACK,UAAb,CAAwB,OAAxB,EACD,CAGH,MAAO,IAAMC,CAAAA,aAAa,0FAAG,2KACJC,CAAAA,KAAK,CAAC,mDAAD,CAAsD,CAChFC,OAAO,CAAE,CACP,eAAgB,kBADT,CADuE,CAAtD,CADD,QACrBC,QADqB,qCAMRA,CAAAA,QAAQ,CAACC,IAAT,EANQ,QAMrBC,IANqB,+CAQpBA,IARoB,wDAAH,kBAAbL,CAAAA,aAAa,0CAAnB,CAWP,eAAsBM,CAAAA,iBAAtB,sD,yGAAO,kBAAiCC,IAAjC,8IAEGd,KAFH,CAEWC,YAAY,CAACG,OAAb,CAAqB,OAArB,CAFX,wBAIoBI,CAAAA,KAAK,0DAAmDM,IAAnD,cAAoE,CAC7FL,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2BT,KAA3B,CAFO,CADoF,CAApE,CAJzB,QAIGU,QAJH,uCAUiBA,CAAAA,QAAQ,CAACC,IAAT,EAVjB,QAUIC,IAVJ,iDAWKA,IAXL,0D,oDAeP,MAAO,IAAMG,CAAAA,eAAe,2FAAG,iLACNP,CAAAA,KAAK,CAAC,qDAAD,CAAwD,CAClFC,OAAO,CAAE,CACP,eAAgB,kBADT,CADyE,CAAxD,CADC,QACvBC,QADuB,uCAMVA,CAAAA,QAAQ,CAACC,IAAT,EANU,QAMvBC,IANuB,iDAQtBA,IARsB,0DAAH,kBAAfG,CAAAA,eAAe,2CAArB,CAYP,MAAO,IAAMC,CAAAA,aAAa,2FAAG,gKACrBhB,KADqB,CACbC,YAAY,CAACG,OAAb,CAAqB,OAArB,CADa,wBAGFI,CAAAA,KAAK,CAAC,mDAAD,CAAsD,CAChFC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2BT,KAA3B,CAFO,CADuE,CAAtD,CAHH,QAGnBU,QAHmB,uCASNA,CAAAA,QAAQ,CAACC,IAAT,EATM,QASnBC,IATmB,gBAUzBK,OAAO,CAACC,GAAR,CAAYN,IAAZ,EAVyB,iCAYlBA,IAZkB,0DAAH,kBAAbI,CAAAA,aAAa,2CAAnB,CAiBP,MAAO,IAAMG,CAAAA,aAAa,2FAAG,wLAAQC,WAAR,OAAQA,WAAR,CAAqBC,WAArB,OAAqBA,WAArB,CAAkCC,QAAlC,OAAkCA,QAAlC,CACrBtB,KADqB,CACbC,YAAY,CAACG,OAAb,CAAqB,OAArB,CADa,wBAGrBI,CAAAA,KAAK,CAAC,mDAAD,CAAsD,CAC7De,MAAM,CAAE,MADqD,CAE7Dd,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BT,KAA3B,CAFK,CAFoD,CAM7DwB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,IAAI,CAAEP,WADW,CAEjBQ,IAAI,CAAEP,WAFW,CAGjBC,QAAQ,CAAEA,QAHO,CAAf,CANuD,CAAtD,CAAL,CAWHO,IAXG,CAWE,SAAAnB,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAXV,EAYLkB,IAZK,CAYA,SAAAC,MAAM,CAAI,CACZb,OAAO,CAACC,GAAR,CAAYY,MAAZ,EACH,CAdK,EAeLC,KAfK,CAeCd,OAAO,CAACe,KAfT,CAHqB,yDAAH,kBAAbb,CAAAA,aAAa,8CAAnB","sourcesContent":["import { useEffect, useState } from \"react\";\n\nexport function storeLoginToken(token) {\n    localStorage.setItem('token', token);\n  }\n  \n  export function getCurrentToken() {\n    const token = localStorage.getItem('token');\n    return token;\n  }\n  \n  export function clearCurrentToken() {\n    localStorage.removeItem('token');\n  }\n\n\nexport const fetchRoutines = async () => {\n  const response = await fetch('https://fitnesstrac-kr.herokuapp.com/api/routines', {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n  const data = await response.json();\n\n  return data;\n}\n\nexport async function fetchUserRoutines(user) {\n\n    const token = localStorage.getItem('token');\n\n    const response = await fetch(`https://fitnesstrac-kr.herokuapp.com/api/users/${user}/routines`, {\n       headers: {\n         'Content-Type': 'application/json',\n         'Authorization': `Bearer ${token}`\n         },\n     });\n     const data = await response.json();\n     return data;\n }\n\n\nexport const fetchActivities = async () => {\n  const response = await fetch('https://fitnesstrac-kr.herokuapp.com/api/activities', {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n  const data = await response.json();\n\n  return data;\n}\n\n\nexport const fetchUsername = async () => {\n  const token = localStorage.getItem('token');\n\n    const response = await fetch('https://fitnesstrac-kr.herokuapp.com/api/users/me', {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n    })\n    const data = await response.json();\n    console.log(data);\n\n    return data;\n}\n\n\n\nexport const createRoutine = async ({routineName, routineGoal, isPublic}) => {\n  const token = localStorage.getItem('token');\n\n  await fetch('https://fitnesstrac-kr.herokuapp.com/api/routines', {\n      method: \"POST\",\n      headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n      body: JSON.stringify({\n          name: routineName,\n          goal: routineGoal,\n          isPublic: isPublic\n    })\n  }).then(response => response.json())\n  .then(result => {\n      console.log(result);\n  })\n  .catch(console.error);\n}\n\n\n"]},"metadata":{},"sourceType":"module"}