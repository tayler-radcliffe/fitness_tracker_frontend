{"ast":null,"code":"import _regeneratorRuntime from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/tradcliffe/fitness_tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Redirect,Link}from'react-router-dom';import{storeLoginToken}from'../api';import'../components/register.css';import FormControl from'@material-ui/core/FormControl';import{makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import OutlinedInput from'@material-ui/core/OutlinedInput';import TextField from'@material-ui/core/TextField';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(_ref){var username=_ref.username,password=_ref.password,confirmedPassword=_ref.confirmedPassword,setUsername=_ref.setUsername,setPassword=_ref.setPassword,setConfirmedPassword=_ref.setConfirmedPassword;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,password){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://fitnesstrac-kr.herokuapp.com/api/users/register',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})}).then(function(response){return response.json();}).then(function(result){console.log(result);var token=result.token;setToken(token);storeLoginToken(token);}).catch(console.error);case 2:case\"end\":return _context.stop();}}},_callee);}));return function registerUser(_x,_x2){return _ref2.apply(this,arguments);};}();if(token){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}var handleClick=function handleClick(event){if(password!==confirmedPassword){return alert('Passwords must match');}else{event.preventDefault();registerUser(username,password).then(function(data){});}};var useStyles=makeStyles(function(theme){return{container:{display:'flex',flexWrap:'wrap'},formControl:{margin:theme.spacing(2),minWidth:120},textFields:{width:'250px',margin:theme.spacing(2),marginTop:'5px'}};});var classes=useStyles();return/*#__PURE__*/_jsx(\"div\",{className:\"register-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleClick,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create an Account\"}),/*#__PURE__*/_jsxs(FormControl,{variant:\"outlined\",className:classes.formControl,children:[/*#__PURE__*/_jsx(TextField,{className:classes.textFields,type:\"text\",value:username,variant:\"outlined\",InputLabelProps:{shrink:true},label:\"Username\",min:\"8\",max:\"20\",required:true,onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{className:classes.textFields,type:\"password\",value:password,variant:\"outlined\",InputLabelProps:{shrink:true},label:\"Password\",min:\"8\",max:\"20\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{className:classes.textFields,type:\"password\",value:confirmedPassword,variant:\"outlined\",InputLabelProps:{shrink:true},label:\"Confirm Password\",min:\"8\",max:\"20\",required:true,onChange:function onChange(e){return setConfirmedPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{className:\"register-button\",children:/*#__PURE__*/_jsx(Button,{size:\"large\",type:\"submit\",color:\"primary\",variant:\"contained\",children:\"Register\"})}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"register-link\",children:\"Already have an account? Sign in\"})]})]})});};export default Register;","map":{"version":3,"sources":["/home/tradcliffe/fitness_tracker/src/components/Register.js"],"names":["React","useState","Redirect","Link","storeLoginToken","FormControl","makeStyles","Button","OutlinedInput","TextField","Register","username","password","confirmedPassword","setUsername","setPassword","setConfirmedPassword","token","setToken","registerUser","fetch","method","headers","body","JSON","stringify","then","response","json","result","console","log","catch","error","handleClick","event","alert","preventDefault","data","useStyles","theme","container","display","flexWrap","formControl","margin","spacing","minWidth","textFields","width","marginTop","classes","shrink","e","target","value"],"mappings":"sVAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,CAAmBC,IAAnB,KAA+B,kBAA/B,CACA,OAASC,eAAT,KAAgC,QAAhC,CACA,MAAO,4BAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,C,wFAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAA+F,IAA5FC,CAAAA,QAA4F,MAA5FA,QAA4F,CAAlFC,QAAkF,MAAlFA,QAAkF,CAAxEC,iBAAwE,MAAxEA,iBAAwE,CAArDC,WAAqD,MAArDA,WAAqD,CAAxCC,WAAwC,MAAxCA,WAAwC,CAA3BC,oBAA2B,MAA3BA,oBAA2B,eAEpFf,QAAQ,CAAC,EAAD,CAF4E,wCAEvGgB,KAFuG,eAEhGC,QAFgG,eAI9G,GAAMC,CAAAA,YAAY,2FAAG,iBAAOR,QAAP,CAAiBC,QAAjB,wIACbQ,CAAAA,KAAK,CAAC,yDAAD,CAA4D,CACrEC,MAAM,CAAE,MAD6D,CAErEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF4D,CAKrEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBd,QAAQ,CAARA,QADmB,CAEnBC,QAAQ,CAARA,QAFmB,CAAf,CAL+D,CAA5D,CAAL,CASHc,IATG,CASE,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EATV,EAUHF,IAVG,CAUE,SAAAG,MAAM,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACA,GAAMZ,CAAAA,KAAK,CAAGY,MAAM,CAACZ,KAArB,CACAC,QAAQ,CAACD,KAAD,CAAR,CACAb,eAAe,CAACa,KAAD,CAAf,CACD,CAfG,EAgBHe,KAhBG,CAgBGF,OAAO,CAACG,KAhBX,CADa,uDAAH,kBAAZd,CAAAA,YAAY,iDAAlB,CAoBA,GAAIF,KAAJ,CAAW,CACT,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CAED,GAAMiB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC7B,GAAIvB,QAAQ,GAAKC,iBAAjB,CAAoC,CAClC,MAAOuB,CAAAA,KAAK,CAAC,sBAAD,CAAZ,CACD,CAFD,IAEO,CACLD,KAAK,CAACE,cAAN,GACAlB,YAAY,CAACR,QAAD,CAAWC,QAAX,CAAZ,CAAiCc,IAAjC,CAAsC,SAACY,IAAD,CAAU,CAC/C,CADD,EAED,CACF,CARD,CAUA,GAAMC,CAAAA,SAAS,CAAGjC,UAAU,CAAC,SAACkC,KAAD,QAAY,CACvCC,SAAS,CAAE,CACTC,OAAO,CAAE,MADA,CAETC,QAAQ,CAAE,MAFD,CAD4B,CAKvCC,WAAW,CAAE,CACXC,MAAM,CAAEL,KAAK,CAACM,OAAN,CAAc,CAAd,CADG,CAEXC,QAAQ,CAAE,GAFC,CAL0B,CASvCC,UAAU,CAAE,CACVC,KAAK,CAAE,OADG,CAEVJ,MAAM,CAAEL,KAAK,CAACM,OAAN,CAAc,CAAd,CAFE,CAGVI,SAAS,CAAE,KAHD,CAT2B,CAAZ,EAAD,CAA5B,CAgBA,GAAMC,CAAAA,OAAO,CAAGZ,SAAS,EAAzB,CAIA,mBACE,YAAK,SAAS,CAAC,oBAAf,uBACE,cAAM,SAAS,CAAC,eAAhB,CAAgC,QAAQ,CAAEL,WAA1C,wBACE,yCADF,cAEE,MAAC,WAAD,EAAa,OAAO,CAAC,UAArB,CAAgC,SAAS,CAAEiB,OAAO,CAACP,WAAnD,wBAEE,KAAC,SAAD,EAAW,SAAS,CAAEO,OAAO,CAACH,UAA9B,CACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAErC,QAFT,CAGE,OAAO,CAAC,UAHV,CAIE,eAAe,CAAE,CACfyC,MAAM,CAAE,IADO,CAJnB,CAOE,KAAK,CAAC,UAPR,CAQE,GAAG,CAAC,GARN,CAQU,GAAG,CAAC,IARd,CAQmB,QAAQ,KAR3B,CASE,QAAQ,CAAE,kBAACC,CAAD,QAAOvC,CAAAA,WAAW,CAACuC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EATZ,EAFF,cAcE,KAAC,SAAD,EAAW,SAAS,CAAEJ,OAAO,CAACH,UAA9B,CACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAEpC,QAFT,CAGE,OAAO,CAAC,UAHV,CAIE,eAAe,CAAE,CACfwC,MAAM,CAAE,IADO,CAJnB,CAOE,KAAK,CAAC,UAPR,CAQE,GAAG,CAAC,GARN,CAQU,GAAG,CAAC,IARd,CAQmB,QAAQ,KAR3B,CASE,QAAQ,CAAE,kBAACC,CAAD,QAAOtC,CAAAA,WAAW,CAACsC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EATZ,EAdF,cA0BE,KAAC,SAAD,EAAW,SAAS,CAAEJ,OAAO,CAACH,UAA9B,CACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAEnC,iBAFT,CAGE,OAAO,CAAC,UAHV,CAIE,eAAe,CAAE,CACfuC,MAAM,CAAE,IADO,CAJnB,CAOE,KAAK,CAAC,kBAPR,CAQE,GAAG,CAAC,GARN,CAQU,GAAG,CAAC,IARd,CAQmB,QAAQ,KAR3B,CASE,QAAQ,CAAE,kBAACC,CAAD,QAAOrC,CAAAA,oBAAoB,CAACqC,CAAC,CAACC,MAAF,CAASC,KAAV,CAA3B,EATZ,EA1BF,cAqCE,YAAK,SAAS,CAAC,iBAAf,uBACE,KAAC,MAAD,EACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,QAFP,CAGE,KAAK,CAAC,SAHR,CAIE,OAAO,CAAC,WAJV,sBADF,EArCF,cA+CE,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,CAAkB,SAAS,CAAC,eAA5B,8CA/CF,GAFF,GADF,EADF,CA0DD,CApHD,CAuHA,cAAe7C,CAAAA,QAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport { storeLoginToken } from '../api';\nimport '../components/register.css';\nimport FormControl from '@material-ui/core/FormControl';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport TextField from '@material-ui/core/TextField';\n\n\n\nconst Register = ({ username, password, confirmedPassword, setUsername, setPassword, setConfirmedPassword }) => {\n\n  const [token, setToken] = useState('');\n\n  const registerUser = async (username, password) => {\n    await fetch('https://fitnesstrac-kr.herokuapp.com/api/users/register', {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    }).then(response => response.json())\n      .then(result => {\n        console.log(result);\n        const token = result.token;\n        setToken(token);\n        storeLoginToken(token);\n      })\n      .catch(console.error);\n  };\n\n  if (token) {\n    return <Redirect to='/' />\n  }\n\n  const handleClick = (event) => {\n    if (password !== confirmedPassword) {\n      return alert('Passwords must match')\n    } else {\n      event.preventDefault();\n      registerUser(username, password).then((data) => {\n      })\n    }\n  };\n\n  const useStyles = makeStyles((theme) => ({\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap',\n    },\n    formControl: {\n      margin: theme.spacing(2),\n      minWidth: 120\n    },\n    textFields: {\n      width: '250px',\n      margin: theme.spacing(2),\n      marginTop: '5px'\n    },\n  }));\n\n  const classes = useStyles();\n\n\n\n  return (\n    <div className=\"register-container\">\n      <form className=\"register-form\" onSubmit={handleClick}>\n        <h2>Create an Account</h2>\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n\n          <TextField className={classes.textFields}\n            type='text'\n            value={username}\n            variant=\"outlined\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            label='Username'\n            min='8' max='20' required\n            onChange={(e) => setUsername(e.target.value)}\n          />\n\n          <TextField className={classes.textFields}\n            type='password'\n            value={password}\n            variant=\"outlined\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            label='Password'\n            min='8' max='20' required\n            onChange={(e) => setPassword(e.target.value)}\n          />\n\n          <TextField className={classes.textFields}\n            type='password'\n            value={confirmedPassword}\n            variant=\"outlined\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            label='Confirm Password'\n            min='8' max='20' required\n            onChange={(e) => setConfirmedPassword(e.target.value)}\n          />\n          <div className=\"register-button\">\n            <Button\n              size='large'\n              type='submit'\n              color='primary'\n              variant=\"contained\"\n            >Register</Button>\n\n          </div>\n\n          <Link to=\"/login\" className=\"register-link\">\n            Already have an account? Sign in\n                </Link>\n        </FormControl>\n      </form>\n    </div>\n  )\n}\n\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}